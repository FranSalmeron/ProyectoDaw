# Usa la imagen base de Node.js
FROM node:16-alpine

# Crear y establecer el directorio de trabajo
WORKDIR /app

# Copiar los archivos de tu aplicación al contenedor
COPY . /app

# Instalar las dependencias de Node.js
RUN npm install

# Instalar netcat para la comprobación
RUN apk add --no-cache netcat-openbsd

# Copiar el archivo entrypoint.sh al contenedor
COPY ./entrypoint.sh /entrypoint.sh

# Asegurarse de que el archivo entrypoint.sh sea ejecutable
RUN chmod +x /entrypoint.sh

# Establecer el script de entrada
ENTRYPOINT ["/entrypoint.sh"]

# Exponer el puerto necesario
EXPOSE 3000
